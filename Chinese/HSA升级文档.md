# HSA升级文档

### 一般升级步骤 

1. 关停瑶池和HSA

3. 备份原HSA程序及相关数据文件

2. 解压新版本包，把旧版本所在目录下的data文件夹恢复到新版目录中

2. ./hsa hsm --test   测试HSM是否连接成功

2. 启动HSA

2. 启动瑶池

    

### HSM2+适配版到HSM3+适配版升级步骤

1. 将HSM2+上的数据备份至HSM3+，保证slot配置及其内部hsa-seed数据不变
2. 关停瑶池和HSA
3. 备份原HSA程序及相关数据文件
4. 解压新版本包，把旧版本所在目录下的data文件夹恢复到新版目录中
5. ./hsa hsm --test   测试HSM是否连接成功
6. 启动HSA
7. 启动瑶池

⚠️ 如果slot无法完全匹配，可以只备份HSM2+中的hsa-seed至HSM3+中，但该情况下HSA需要重新初始化，此时不必再恢复旧版本的data文件，HSA初始化时需要选择HSM3+中备份数据hsa-seed所在的slot。

⚠️ 如果HSM2+中的hsa-seed丢失，则没有办法恢复。
